!function(l){"use strict";var r={sectionIndex:null,contentID:0,init:function(){window.elementor.on("preview:loaded",r.previewLoaded)},previewLoaded:function(){var e=window.elementor.$previewContents,p=(e.find(".elementor-add-new-section"),'<div id="wpr-library-btn" class="elementor-add-section-area-button" style="background:url('+window.elementor.config.home_url+'/wp-content/plugins/royal-elementor-addons/assets/img/logo-40x40.png) no-repeat;"></div>'),t=l("#tmpl-elementor-add-section"),i=(i=t.text()).replace('<div class="elementor-add-section-drag-title',p+'<div class="elementor-add-section-drag-title');t.text(i),l(e).on("click",".elementor-editor-section-settings .elementor-editor-element-add",function(){var t=l(this).closest(".elementor-top-section").prev(".elementor-add-section"),i=l(this).closest(".elementor-top-section").data("model-cid");0==t.find("#wpr-library-btn").length&&setTimeout(function(){t.find(".elementor-add-new-section").prepend(p)},110),window.elementor.elements.models.length&&l.each(window.elementor.elements.models,function(t,e){i===e.cid&&(r.sectionIndex=t)}),r.contentID++}),"wpr-popups"===window.elementor.config.document.type&&setTimeout(function(){0===e.find(".elementor-section-wrap.ui-sortable").children().length&&e.find("#wpr-library-btn").trigger("click")},2e3),e.on("click","#wpr-library-btn",function(){r.renderPopup(e),"wpr-popups"===window.elementor.config.document.type&&void 0===e.find("#wpr-library-btn").attr("data-filter")?r.renderPopupContent(e,"popups"):r.renderPopupContent(e,"blocks"),l(document).on("wpr-filter-popup-content",function(){var t=e.find("#wpr-library-btn").attr("data-filter");e.find('.wpr-tplib-sidebar ul li[data-filter="'+t+'"]').trigger("click")})})},renderPopup:function(t){var e;0==t.find(".wpr-tplib-popup").length&&(e='<li data-tab="blocks" class="wpr-tplib-active-tab">Blocks</li>',"wpr-popups"===window.elementor.config.document.type&&(e=void 0===t.find("#wpr-library-btn").attr("data-filter")?'\t\t\t\t\t\t\t<li data-tab="blocks">Blocks</li>\t\t\t\t\t\t\t<li data-tab="popups" class="wpr-tplib-active-tab">Popups</li>':'\t\t\t\t\t\t\t<li data-tab="blocks" class="wpr-tplib-active-tab">Blocks</li>\t\t\t\t\t\t\t<li data-tab="popups">Popups</li>'),t.find("body").append('\t\t\t\t\t<div class="wpr-tplib-popup-overlay">\t\t\t\t\t\t<div class="wpr-tplib-popup">\t\t\t\t\t\t\t<div class="wpr-tplib-header elementor-clearfix">\t\t\t\t\t\t\t\t<div class="wpr-tplib-logo"><span class="wpr-library-icon" style="background:url('+window.elementor.config.home_url+'/wp-content/plugins/royal-elementor-addons/assets/img/logo-40x40.png) no-repeat;">RE</span>Library</div>\t\t\t\t\t\t\t\t<div class="wpr-tplib-back" data-tab="">\t\t\t\t\t\t\t\t\t<i class="eicon-chevron-left"></i> <span>Back to Library</span>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<ul>'+e+'</ul>\t\t\t\t\t\t\t\t<span class="wpr-tplib-insert-template"><i class="eicon-file-download"></i> <span>Insert</span></span>\t\t\t\t\t\t\t\t<div class="wpr-tplib-close"><i class="eicon-close"></i></div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="wpr-tplib-content-wrap elementor-clearfix">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="wpr-tplib-preview-wrap"></div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t')),$e.run("panel/close"),l("#wpr-template-settings-notification").hide(),t.find("html").css("overflow","hidden"),t.find(".wpr-tplib-preview-wrap iframe").remove(),t.find(".wpr-tplib-popup-overlay").show(),t.find(".wpr-tplib-close").on("click",function(){$e.run("panel/open"),l("#wpr-template-settings-notification").show(),t.find("html").css("overflow","auto"),t.find(".wpr-tplib-popup-overlay").fadeOut("fast",function(){t.find(".wpr-tplib-popup-overlay").remove(),t.find("#wpr-library-btn").removeAttr("data-filter")})}),t.find(".wpr-tplib-header").find("li").on("click",function(){t.find(".wpr-tplib-header").find("li").removeClass("wpr-tplib-active-tab"),l(this).addClass("wpr-tplib-active-tab"),r.renderPopupContent(t,l(this).data("tab"))}),t.find(".wpr-tplib-back").on("click",function(){l(this).hide(),t.find(".wpr-tplib-close i").css("border-left","0"),t.find(".wpr-tplib-header").find(".wpr-tplib-insert-template").hide(),t.find(".wpr-tplib-header").find(".wpr-tplib-insert-template").removeClass("wpr-tplib-insert-pro"),t.find(".wpr-tplib-preview-wrap").hide(),t.find(".wpr-tplib-preview-wrap").html(""),t.find(".wpr-tplib-popup").css("overflow","hidden"),t.find(".wpr-tplib-logo").show(),t.find(".wpr-tplib-header ul li").show(),t.find(".wpr-tplib-content-wrap").show()})},renderPopupContent:function(n,t){r.renderPopupLoader(n);t={action:"render_library_templates_"+t};l.post(ajaxurl,t,function(t){n.find(".wpr-tplib-content-wrap").html(t)}).always(function(){n.find(".wpr-tplib-template-media").on("click",function(){var t=l(this).parent().data("filter"),e=l(this).parent().data("slug"),i="https://royal-elementor-addons.com/premade-styles/"+l(this).parent().data("preview-url"),p=l(this).parent().data("preview-type"),r="";l(this).closest(".wpr-tplib-pro-wrap").length&&(r="-pro",n.find(".wpr-tplib-header").find(".wpr-tplib-insert-template").addClass("wpr-tplib-insert-pro")),n.find(".wpr-tplib-header").find(".wpr-tplib-insert-template").attr("data-filter",t).attr("data-slug",e),n.find(".wpr-tplib-header").find(".wpr-tplib-insert-template").html(l(this).parent().find(".wpr-tplib-insert-template").html()),n.find(".wpr-tplib-close i").css("border-left","1px solid #e8e8e8"),n.find(".wpr-tplib-logo").hide(),n.find(".wpr-tplib-header ul li").hide(),n.find(".wpr-tplib-back").show(),n.find(".wpr-tplib-header").find(".wpr-tplib-insert-template").show(),n.find(".wpr-tplib-content-wrap").hide(),n.find(".wpr-tplib-preview-wrap").show(),"iframe"==p?(n.find(".wpr-tplib-preview-wrap").html('<div class="wpr-tplib-iframe"><iframe src="'+i+"?ref=rea-plugin-library-preview"+r+'"></iframe></div>'),n.find(".wpr-tplib-popup").css("overflow","hidden")):(i=i.replace("premade-styles","library/premade-styles"),n.find(".wpr-tplib-preview-wrap").html('<div class="wpr-tplib-image"><img src="'+i+'"></div>'),n.find(".wpr-tplib-popup").css("overflow","scroll"))}),n.find(".wpr-tplib-filters-list ul li").on("click",function(){var t=l(this).attr("data-filter");"all"===t?n.find(".wpr-tplib-template").parent().show():(n.find(".wpr-tplib-template").parent().hide(),n.find('.wpr-tplib-template[data-filter="'+t+'"]').parent().show()),n.find(".wpr-tplib-filters h3 span").attr("data-filter",t).text(l(this).text()),r.renderPopupGrid(n)}),n.find(".wpr-tplib-sub-filters ul li").on("click",function(){var t=l(this).attr("data-sub-filter"),e=n.find(".wpr-tplib-filters h3 span").attr("data-filter");n.find(".wpr-tplib-sub-filters ul li").removeClass("wpr-tplib-activ-filter"),l(this).addClass("wpr-tplib-activ-filter"),"all"===t?n.find('.wpr-tplib-template[data-filter="'+e+'"]').parent().show():(n.find(".wpr-tplib-template").parent().hide(),n.find('.wpr-tplib-template[data-filter="'+e+'"][data-sub-filter="'+t+'"]').parent().show()),r.renderPopupGrid(n)});n.find(".wpr-tplib-sidebar input").on("keyup",function(){""!==l(this).val()?(n.find(".wpr-tplib-template").parent().hide(),n.find('.wpr-tplib-template[data-keywords*="'+l(this).val()+'"]').parent().show()):n.find(".wpr-tplib-template").parent().show()}),n.find(".wpr-tplib-insert-template").on("click",function(){var t,e=(l(this).parent().hasClass("wpr-tplib-header")?l(this):l(this).closest(".wpr-tplib-template")).attr("data-filter"),i=(l(this).parent().hasClass("wpr-tplib-header")?l(this):l(this).closest(".wpr-tplib-template")).attr("data-slug"),p=n.find(".wpr-tplib-active-tab").attr("data-tab");"wpr-popups"===window.elementor.config.document.type&&"popups"===p&&(e="popups/"+e),l(this).hasClass("wpr-tplib-insert-pro")?((t=window.location.href).substring(0,t.indexOf("/wp-admin")+9),window.open("https://royal-elementor-addons.com/?ref=rea-plugin-library-"+e+"-upgrade-pro#purchasepro","_blank")):(n.find(".wpr-tplib-content-wrap").show(),n.find(".wpr-tplib-preview-wrap").hide(),r.renderPopupLoader(n),i={action:"wpr_import_library_template",slug:e+"/"+i},l.post(ajaxurl,i,function(t){t=t.substring(0,t.length-1);(t=JSON.parse(t)).content[0].id+=r.contentID,window.elementor.getPreviewView().addChildModel(t.content,{at:r.sectionIndex}),"wpr-popups"===window.elementor.config.document.type&&"popups"===p&&(elementor.settings.page.model.set({popup_trigger:"load",popup_show_again_delay:"0",popup_load_delay:"1",popup_display_as:"modal",popup_width:{unit:"px",size:"650"},popup_height:"auto",popup_align_hr:"center",popup_align_vr:"center",popup_content_align:"flex-start",popup_animation:"fadeIn",popup_animation_duration:"1",popup_overlay_display:"yes",popup_close_button_display:"yes",popup_container_bg_background:"classic",popup_container_bg_position:"center center",popup_container_bg_repeat:"no-repeat",popup_container_bg_size:"cover",popup_overlay_bg_background:"classic",popup_container_padding:{isLinked:!0,unit:"px",top:20,right:20,bottom:20,left:20},popup_container_radius:{isLinked:!0,unit:"px",top:0,right:0,bottom:0,left:0}}),elementor.settings.page.model.set(t.page_settings)),window.elementor.panel.$el.find("#elementor-panel-footer-saver-publish button").removeClass("elementor-disabled"),window.elementor.panel.$el.find("#elementor-panel-footer-saver-options button").removeClass("elementor-disabled"),r.sectionIndex=null,$e.run("panel/open"),l("#wpr-template-settings-notification").show(),n.find("html").css("overflow","auto"),n.find(".wpr-tplib-popup-overlay").fadeOut("fast",function(){n.find(".wpr-tplib-popup-overlay").remove(),n.find("#wpr-library-btn").removeAttr("data-filter")})}))}),l(document).trigger("wpr-filter-popup-content"),n.find(".wpr-tplib-filters").on("click",function(){"0"==n.find(".wpr-tplib-filters-list").css("opacity")?n.find(".wpr-tplib-filters-list").css({opacity:"1",visibility:"visible"}):n.find(".wpr-tplib-filters-list").css({opacity:"0",visibility:"hidden"})}),n.on("click",function(){"1"==n.find(".wpr-tplib-filters-list").css("opacity")&&n.find(".wpr-tplib-filters-list").css({opacity:"0",visibility:"hidden"})}),r.renderPopupGrid(n)})},renderPopupLoader:function(t){t.find(".wpr-tplib-content-wrap").prepend('<div class="wpr-tplib-loader"><div class="elementor-loader-wrapper"><div class="elementor-loader"><div class="elementor-loader-boxes"><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div></div></div><div class="elementor-loading-title">Loading</div></div></div>')},renderPopupGrid:function(t){var e=Macy({container:t.find(".wpr-tplib-template-gird-inner")[0],waitForImages:!0,margin:30,columns:5,breakAt:{1370:4,940:3,520:2,400:1}});setTimeout(function(){e.recalculate(!0)},300),setTimeout(function(){e.recalculate(!0)},600)}};l(window).on("elementor:init",r.init)}(jQuery);