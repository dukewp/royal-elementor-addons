!function(i){"use strict";var t={loaded:!1,init:function(){window.elementor.on("preview:loaded",t.loadPreview)},loadPreview:function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/shortcode.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)}),window.elementorFrontend.hooks.addAction("frontend/element_ready/wpr-advanced-slider.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)}),window.elementorFrontend.hooks.addAction("frontend/element_ready/wpr-tabs.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)}),window.elementorFrontend.hooks.addAction("frontend/element_ready/wpr-content-toggle.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)})},renderPopup:function(e){t.getPopup().show(),i("#wpr-template-editor-popup .dialog-message").html('<iframe src="'+i(this).data("permalink")+'&elementor" id="wpr-template-edit-frame" width="100%" height="100%"></iframe>'),i("#wpr-template-editor-popup .dialog-message").append('<div id="wpr-template-editor-loading"><div class="elementor-loader-wrapper"><div class="elementor-loader"><div class="elementor-loader-boxes"><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div></div></div><div class="elementor-loading-title">Loading</div></div></div>'),i("#wpr-template-edit-frame").on("load",function(){i("#wpr-template-editor-loading").fadeOut(300)}),i("#wpr-template-editor-popup .dialog-close-button").css({right:"30px",width:"35px",height:"35px","line-height":"30px","border-radius":"50%","text-align":"center",opacity:"1","background-color":"#333","box-shadow":"1px 1px 3px 0 #000"}).html('<i class="fas fa-times"></i>'),i("#wpr-template-editor-popup .dialog-close-button i").css({"font-size":"15px",color:"#fff"}),i("#wpr-template-editor-popup .dialog-close-button").on("click",function(){elementor.reloadPreview()})},getPopup:function(){return t.loaded||(this.loaded=elementor.dialogsManager.createWidget("lightbox",{id:"wpr-template-editor-popup",closeButton:!0,hide:{onBackgroundClick:!1}})),t.loaded}};i(window).on("elementor:init",t.init);var p={init:function(){i("body").hasClass("elementor-editor-wpr-popup")&&(window.elementor.on("preview:loaded",p.onPreviewLoad),window.elementor.on("preview:loaded",p.onPreviewChange),elementor.settings.page.model.on("change",p.onControlChange))},onPreviewLoad:function(){i("#elementor-panel-footer-settings").trigger("click"),p.settingsNotification(),window.elementorFrontend.hooks.addAction("frontend/element_ready/global",function(e){e=e.closest(".wpr-template-popup");p.fixImageOverlay(e),p.fixPopupLayout(e)});var e=i("#elementor-preview-iframe"),t=i("body",e.contents());setTimeout(function(){"visible"===t.find(".wpr-template-popup-inner").children(".wpr-popup-close-btn").css("visibility")&&"visible"===t.find(".wpr-popup-container").children(".wpr-popup-close-btn").css("visibility")&&t.find(".wpr-template-popup-inner").children(".wpr-popup-close-btn").css("visibility","hidden")},300)},onPreviewChange:function(){var e=document.getElementById("elementor-preview-iframe"),n=e.contentDocument||e.contentWindow.document;elementor.hooks.addAction("panel/open_editor/widget",function(e,t,o){p.fixImageOverlay(i(".wpr-template-popup",n))})},onControlChange:function(e){var t=document.getElementById("elementor-preview-iframe"),o=t.contentDocument||t.contentWindow.document,t=i(".wpr-template-popup",o);e.changed.hasOwnProperty("popup_display_as")&&("notification"===e.changed.popup_display_as?t.addClass("wpr-popup-notification"):t.removeClass("wpr-popup-notification")),e.changed.hasOwnProperty("popup_animation")&&((o=t.find(".wpr-popup-container")).removeAttr("class"),o.addClass("wpr-popup-container ps-container"),o.addClass("animated "+e.changed.popup_animation)),e.changed.hasOwnProperty("popup_close_button_position")&&("inside"===e.changed.popup_close_button_position?(t.find(".wpr-template-popup-inner").children(".wpr-popup-close-btn").css("visibility","hidden"),t.find(".wpr-popup-container").children(".wpr-popup-close-btn").css("visibility","visible")):(t.find(".wpr-popup-container").children(".wpr-popup-close-btn").css("visibility","hidden"),t.find(".wpr-template-popup-inner").children(".wpr-popup-close-btn").css("visibility","visible"))),(e.changed.hasOwnProperty("popup_height")||e.changed.hasOwnProperty("popup_custom_height")||e.changed.hasOwnProperty("popup_width")||e.changed.hasOwnProperty("popup_container_margin")||e.changed.hasOwnProperty("popup_container_padding")||e.changed.hasOwnProperty("popup_display_as"))&&p.fixImageOverlay(t)},fixImageOverlay:function(e){var t=e.find(".wpr-popup-container").outerHeight(),o=e.find('[data-elementor-type="wpr-popup"]').outerHeight(),o=o<=t?t:o;e.find(".wpr-popup-image-overlay").css("height",o+"px")},fixPopupLayout:function(e){var t=p.getDocumentSettings();"notification"===t.popup_display_as&&e.addClass("wpr-popup-notification"),("inside"===t.popup_close_button_position?e.find(".wpr-template-popup-inner"):e.find(".wpr-popup-container")).children(".wpr-popup-close-btn").css("visibility","hidden")},getDocumentSettings:function(){var t={},o=elementor.settings.page.model;return jQuery.each(o.getActiveControls(),function(e){t[e]=o.attributes[e]}),t},settingsNotification:function(){(JSON.parse(localStorage.getItem("WprPopupEditorNotification"))||{})+6048e5>=Date.now()||(i("body").append('\t\t\t\t<div id="wpr-template-settings-notification">\t\t\t\t\t<h4><i class="eicon-info-circle"></i><span>Please Note</span></h4>\t\t\t\t\t<p>Click here to access <strong>Popup Settings</strong>.</p>\t\t\t\t\t<i class="eicon-close"></i>\t\t\t\t</div>\t\t\t').hide().fadeIn(),i(document).on("click",function(){i("#wpr-template-settings-notification").fadeOut()}),i("#wpr-template-settings-notification .eicon-close").on("click",function(){i("#wpr-template-settings-notification").fadeOut(),localStorage.setItem("WprPopupEditorNotification",Date.now())}))}};i(window).on("elementor:init",p.init);var e={init:function(){i("body").hasClass("elementor-editor-wpr-template-builder")&&window.elementor.on("preview:loaded",e.onPreviewLoad)},onPreviewLoad:function(){setTimeout(function(){i("#elementor-panel-footer-settings").trigger("click")},500),e.settingsNotification(),i("#elementor-panel-footer-settings").on("click",function(){setTimeout(function(){i(".elementor-control-submit_preview_changes").on("click",function(){i("#elementor-panel-saver-button-publish").trigger("click"),i("#elementor-preview-loading").show();var e=setInterval(function(){i("html").hasClass("nprogress-busy")||(location.reload(),clearInterval(e))},500)})})})},settingsNotification:function(){(JSON.parse(localStorage.getItem("WprTemplateEditorNotification"))||{})+6048e5>=Date.now()||setTimeout(function(){i("body").append('\t\t\t\t<div id="wpr-template-settings-notification">\t\t\t\t\t<h4><i class="eicon-info-circle"></i><span>Please Note</span></h4>\t\t\t\t\t<p>You can change <strong>Preview Settings</strong> here.</p>\t\t\t\t\t<i class="eicon-close"></i>\t\t\t\t</div>\t\t\t').hide().fadeIn(),i(document).on("click",function(){i("#wpr-template-settings-notification").fadeOut()}),i("#wpr-template-settings-notification .eicon-close").on("click",function(){i("#wpr-template-settings-notification").fadeOut(),localStorage.setItem("WprTemplateEditorNotification",Date.now())})},1e3)}};i(window).on("elementor:init",e.init)}(jQuery);