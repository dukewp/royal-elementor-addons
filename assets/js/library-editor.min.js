!function(o){"use strict";var t={loaded:!1,init:function(){window.elementor.on("preview:loaded",t.loadPreview)},loadPreview:function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/shortcode.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)}),window.elementorFrontend.hooks.addAction("frontend/element_ready/wpr-advanced-slider.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)}),window.elementorFrontend.hooks.addAction("frontend/element_ready/wpr-tabs.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)}),window.elementorFrontend.hooks.addAction("frontend/element_ready/wpr-content-toggle.default",function(e){e.find(".wpr-template-edit-btn").on("click",t.renderPopup)})},renderPopup:function(e){t.getPopup().show(),o("#wpr-template-editor-popup .dialog-message").html('<iframe src="'+o(this).data("permalink")+'&elementor" id="wpr-template-edit-frame" width="100%" height="100%"></iframe>'),o("#wpr-template-editor-popup .dialog-message").append('<div id="wpr-template-editor-loading"><div class="elementor-loader-wrapper"><div class="elementor-loader"><div class="elementor-loader-boxes"><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div><div class="elementor-loader-box"></div></div></div><div class="elementor-loading-title">Loading</div></div></div>'),o("#wpr-template-edit-frame").on("load",function(){o("#wpr-template-editor-loading").fadeOut(300)}),o("#wpr-template-editor-popup .dialog-close-button").css({right:"30px",width:"35px",height:"35px","line-height":"30px","border-radius":"50%","text-align":"center",opacity:"1","background-color":"#333","box-shadow":"1px 1px 3px 0 #000"}).html('<i class="fas fa-times"></i>'),o("#wpr-template-editor-popup .dialog-close-button i").css({"font-size":"15px",color:"#fff"}),o("#wpr-template-editor-popup .dialog-close-button").on("click",function(){elementor.reloadPreview()})},getPopup:function(){return t.loaded||(this.loaded=elementor.dialogsManager.createWidget("lightbox",{id:"wpr-template-editor-popup",closeButton:!0,hide:{onBackgroundClick:!1}})),t.loaded}};o(window).on("elementor:init",t.init);var n={init:function(){o("body").hasClass("elementor-editor-wpr-popups")&&(window.elementor.on("preview:loaded",n.onPreviewLoad),window.elementor.on("preview:loaded",n.onPreviewChange),elementor.settings.page.model.on("change",n.onControlChange))},onPreviewLoad:function(){setTimeout(function(){o("#elementor-panel-footer-settings").trigger("click")},2e3),n.settingsNotification(),window.elementorFrontend.hooks.addAction("frontend/element_ready/global",function(e){e=e.closest(".wpr-template-popup");n.fixPopupLayout(e)})},onPreviewChange:function(){},onControlChange:function(e){var t=document.getElementById("elementor-preview-iframe"),t=t.contentDocument||t.contentWindow.document,t=o(".wpr-template-popup",t);e.changed.hasOwnProperty("popup_height"),e.changed.hasOwnProperty("popup_display_as")&&("notification"===e.changed.popup_display_as?t.addClass("wpr-popup-notification"):t.removeClass("wpr-popup-notification")),e.changed.hasOwnProperty("popup_display_as"),e.changed.hasOwnProperty("popup_animation")&&((t=t.find(".wpr-popup-container")).removeAttr("class"),t.addClass("wpr-popup-container animated "+e.changed.popup_animation))},fixPopupLayout:function(e){var t=n.getDocumentSettings();e.find(".wpr-popup-container-inner").hasClass("ps")||new PerfectScrollbar(e.find(".wpr-popup-container-inner")[0],{suppressScrollX:!0}),"notification"===t.popup_display_as&&e.addClass("wpr-popup-notification")},getDocumentSettings:function(){var t={},o=elementor.settings.page.model;return jQuery.each(o.getActiveControls(),function(e){t[e]=o.attributes[e]}),t},settingsNotification:function(){(JSON.parse(localStorage.getItem("WprPopupEditorNotification"))||{})+6048e5>=Date.now()||(o("body").append('\t\t\t\t<div id="wpr-template-settings-notification">\t\t\t\t\t<h4><i class="eicon-info-circle"></i><span>Please Note</span></h4>\t\t\t\t\t<p>Click here to access <strong>Popup Settings</strong>.</p>\t\t\t\t\t<i class="eicon-close"></i>\t\t\t\t</div>\t\t\t').hide().fadeIn(),o("#wpr-template-settings-notification .eicon-close").on("click",function(){o("#wpr-template-settings-notification").fadeOut(),localStorage.setItem("WprPopupEditorNotification",Date.now())}))}};o(window).on("elementor:init",n.init);var e={init:function(){o("body").hasClass("elementor-editor-wpr-theme-builder")&&window.elementor.on("preview:loaded",e.onPreviewLoad)},onPreviewLoad:function(){setTimeout(function(){o("#elementor-panel-footer-settings").trigger("click")},500),e.settingsNotification(),o("#elementor-panel-footer-settings").on("click",function(){setTimeout(function(){o(".elementor-control-submit_preview_changes").on("click",function(){o("#elementor-panel-saver-button-publish").trigger("click"),o("#elementor-preview-loading").show();var e=setInterval(function(){o("html").hasClass("nprogress-busy")||(location.reload(),clearInterval(e))},500)})})})},settingsNotification:function(){(JSON.parse(localStorage.getItem("WprTemplateEditorNotification"))||{})+6048e5>=Date.now()||setTimeout(function(){o("body").append('\t\t\t\t<div id="wpr-template-settings-notification">\t\t\t\t\t<h4><i class="eicon-info-circle"></i><span>Please Note</span></h4>\t\t\t\t\t<p>You can change <strong>Preview Settings</strong> here.</p>\t\t\t\t\t<i class="eicon-close"></i>\t\t\t\t</div>\t\t\t').hide().fadeIn(),o(document).on("click",function(){o("#wpr-template-settings-notification").fadeOut()}),o("#wpr-template-settings-notification .eicon-close").on("click",function(){o("#wpr-template-settings-notification").fadeOut(),localStorage.setItem("WprTemplateEditorNotification",Date.now())})},1e3)}};o(window).on("elementor:init",e.init)}(jQuery);